<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>

    <head>
        <meta charset="UTF-8">
        <title th:text="${meeting.title}"></title>
        <link rel="stylesheet" href="/css/meeting_post.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
              integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
                crossorigin="anonymous"></script>
    </head>

<body>
<th:block th:if="${msg}">
    <script th:inline="javascript">
        console.log("test");
        alert([[${ msg }]]);
    </script>
</th:block>
<div class="col-lg-8 mx-auto p-4 py-md-5">

    <main>
        <div class="row justify-content-between mb-2" style="margin:2px;">
            <a class="col-1 btn btn-outline-primary" th:text="${meeting.category}"
               th:href="@{/meeting(ctgr=${meeting.category})}">Category</a>

            <div class="col-md-2 btn-group" role="group" aria-label="Basic mixed styles example">
                <button type="button" class="btn btn-danger"
                        th:onclick="|location.href='@{/meeting/deleteMet(idx = ${meeting.idx}, writer_nickname = ${meeting.writer_nickname})}'|">삭제
                </button>
                <button type="button" class="btn btn-success"
                        th:onclick="|location.href='@{/updateMetForm.html}'|">수정
                </button>
            </div>

        </div>
        <h1 class="" th:text="${meeting.title}" style="font-size:50px;"></h1>

        <div class="row">
            <p class="col-md-auto fs-6" th:text="|시작일: ${#strings.substring(meeting.start_datetime, 0, 10)}|"></p>
            <p class="col-md-auto fs-6" th:text="|현재인원/모집인원 : ${meeting_member}/${meeting.recruits}|"></p>

        </div>
        <!--참가신청: idx session-->
        <div class="row mb-5">
            <div class="col row">
                <div class="col-md-auto" th:if="${apply}">
                    <a class="btn btn-primary btn-lg px-4 btn-color"
                       th:onclick="|location.href='@{/meeting/apply(meeting_idx=${meeting.idx})}'|">신청 취소</a>
                </div>
                <div class="col-md-auto" th:unless="${apply}">
                    <a class="btn btn-primary btn-lg px-4 btn-color"
                       th:onclick="|location.href='@{/meeting/apply(meeting_idx=${meeting.idx})}'|">참가 신청</a>
                </div>

                <div class="col-md-auto" th:if="${scrap}">
                    <a class="btn btn-primary btn-lg px-4 btn-color"
                       th:onclick="|location.href='@{/meeting/scrap(meeting_idx=${meeting.idx})}'|">스크랩 취소</a>
                </div>
                <div class="col-md-auto" th:unless="${scrap}">
                    <a class="btn btn-primary btn-lg px-4 btn-color"
                       th:onclick="|location.href='@{/meeting/scrap/cancel(meeting_idx=${meeting.idx})}'|">스크랩</a>
                </div>


            </div>

        </div>

        <div class="meeting-contents">
            <hr class="mb-5">

            <div th:if="${meeting_image}" id="carouselExampleDark" class="carousel carousel-dark slide border border-dark-subtle mb-5 meeting-image"
                 data-bs-ride="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item active" th:each="image, index: ${meeting_image}"
                         th:if="${index.index} == 0">
                        <img th:src="@{${image}}" class="d-block w-100" alt="no image">
                    </div>
                    <div class="carousel-item" th:each="image, index: ${meeting_image}"
                         th:unless="${index.index} == 0">
                        <img th:src="@{${image}}" class="d-block w-100" alt="no image">
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target='#carouselExampleDark'
                        data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target='#carouselExampleDark'
                        data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
            <div class="mb-5" th:text="${meeting.content_text}" style="width:80%;"></div>
        </div>

    </main>


</div>

</body>

</html>