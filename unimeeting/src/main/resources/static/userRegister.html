<!DOCTYPE html>
<html lang="kr">
<link href="/css/hapalpal.css" rel="stylesheet"/>
<head>
    <meta charset="UTF-8">
    <title>Register</title>
</head>
<body>
<div id="frame307">
    <div id="titleregisterbox">
    <h2 id="titleregister">회원가입</h2>
    </div>
        <form action="/user/register" method="post" id="frame304">
        <label for="user_id">User ID:</label>
    <input type="text" id="user_id" name="user_id" required>
    <button type="button" onclick="checkUserId()">Check Availability</button>
    <span id="availability-message"></span><br>

    <label for="password">Password:</label>
    <input type="password" id="password" name="password" required><br>

    <label for="nickname">NickName:</label>
    <input type="text" id="nickname" name="nickname" required>
    <button type="button" onclick="checkNickname()">Check Availability</button>
    <span id="nickname-availability-message"></span><br>

    <label for="email">email:</label>
    <input type="text" id="email" name="email" required>
    <button type="button" onclick="checkEmail()">Check Availability</button>
    <span id="email-availability-message"></span><br>

    <label><input type="checkbox"  name="category" value="운동">운동</label>
    <label><input type="checkbox"  name="category" value="게임">게임</label>
    <label><input type="checkbox"  name="category" value="애니">애니</label><br>

    <label><input type="checkbox"  name="category" value="코딩">코딩</label>
    <label><input type="checkbox"  name="category" value="영화">영화</label>
    <label><input type="checkbox"  name="category" value="요리">요리</label><br>

    <label for="phone_number">phone_number:</label>
    <input type="text" id="phone_number" name="phone_number" required><br>

    <button type="submit">Register</button>
</form>
</div>
</body>
<script>
    function checkUserId() {
        var userId = document.getElementById("user_id").value;
        var availabilityMessage = document.getElementById("availability-message");

        if (userId === "") {
            availabilityMessage.textContent = "아이디를 입력해주세요.";
            return;
        }

        var xhr = new XMLHttpRequest();
        xhr.open("GET", "/user/check?user_id=" + userId, true);
        xhr.onload = function () {
            if (xhr.status >= 200 && xhr.status < 300) {
                var response = JSON.parse(xhr.responseText);
                if (response.available) {
                    availabilityMessage.textContent = "사용 가능한 아이디입니다.";
                } else {
                    availabilityMessage.textContent = "이미 사용 중인 아이디입니다. 다른 아이디를 입력해주세요.";
                }
            } else {
                availabilityMessage.textContent = "요청에 실패했습니다. 다시 시도해주세요.";
            }
        };
        xhr.send();
    }
    function checkNickname() {
        var nickname = document.getElementById("nickname").value;
        var nicknameAvailabilityMessage = document.getElementById("nickname-availability-message");

        if (nickname === "") {
            nicknameAvailabilityMessage.textContent = "닉네임을 입력해주세요.";
            return;
        }

        var xhr = new XMLHttpRequest();
        xhr.open("GET", "/user/check-nickname?nickname=" + nickname, true);
        xhr.onload = function () {
            if (xhr.status >= 200 && xhr.status < 300) {
                var response = JSON.parse(xhr.responseText);
                if (response.available) {
                    nicknameAvailabilityMessage.textContent = "사용 가능한 닉네임입니다.";
                } else {
                    nicknameAvailabilityMessage.textContent = "이미 사용 중인 닉네임입니다. 다른 닉네임을 입력해주세요.";
                }
            } else {
                nicknameAvailabilityMessage.textContent = "요청에 실패했습니다. 다시 시도해주세요.";
            }
        };
        xhr.send();
    }
    function checkEmail() {
        var email = document.getElementById("email").value;
        var emailAvailabilityMessage = document.getElementById("email-availability-message");

        if (email === "") {
            emailAvailabilityMessage.textContent = "이메일을 입력해주세요.";
            return;
        }

        var xhr = new XMLHttpRequest();
        xhr.open("GET", "/user/check-email?email=" + email, true);
        xhr.onload = function () {
            if (xhr.status >= 200 && xhr.status < 300) {
                var response = JSON.parse(xhr.responseText);
                if (response.available) {
                    emailAvailabilityMessage.textContent = "사용 가능한 이메일입니다.";
                } else {
                    emailAvailabilityMessage.textContent = "이미 사용 중인 이메일입니다. 다른 이메일을 입력해주세요.";
                }
            } else {
                emailAvailabilityMessage.textContent = "요청에 실패했습니다. 다시 시도해주세요.";
            }
        };
        xhr.send();
    }


</script>
</html>
